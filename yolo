import cv2
from ultralytics import YOLO
import winsound

model = YOLO("yolov8n.pt")

cap = cv2.VideoCapture(0)

cap.set(cv2.CAP_PROP_FRAME_WIDTH, 540)
cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 680)

frequencia = 1000
duracao = 100

area_alerta = 20500

while True:
    ret, frame = cap.read()
    if not ret:
        break

    results = model(frame)

    if len(results[0].boxes) > 0:
        boxes = results[0].boxes.xyxy
        confs = results[0].boxes.conf
        classes = results[0].boxes.cls

        index = int(confs.argmax())
        obj = model.names[int(classes[index])]
        x1,y1,x2,y2 = boxes[index]
        area = (x2 - x1) * (y2 - y1)

        if area > area_alerta:
            winsound.Beep(frequencia, duracao)

    frame_anotado = results[0].plot()

    cv2.imshow("YOLO Webcam", frame_anotado)

    if cv2.waitKey(1) & 0xFF == 27:
        break

cap.release()
cv2.destroyAllWindows()
